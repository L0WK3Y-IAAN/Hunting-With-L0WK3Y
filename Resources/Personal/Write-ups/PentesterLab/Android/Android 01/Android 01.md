# Android 01

<aside>

## The Challenge

This application requires a PIN code to provide you with the key. However, without knowing the PIN, you will not be able to retrieve the key.

The way to solve this exercise is to extract the content of the **`APK`** (using [**apktool**](https://ibotpeaches.github.io/Apktool/) for example) to get the configuration files of the application. Once you manage to extract the **`APK`**, you should check the content of the following files:

- **`AndroidManifest.xml`**: this is the main configuration file used by all Android applications. It's used by Android to get information about the application as well as what functionalities are exposed to other applications (amongst other things).
- **`res/values/strings.xml`**.

**`apktool`** allows you to unzip the **`APK`** file and also decode files like **`AndroidManifest.xml`** to make it easier to review them.

By inspecting these files, you will be able to get the key to solve this exercise.

</aside>

For this walkthrough series I will be using JADX & Frida (for the last challenge). Let’s get started! In MainActivity, there is an Intent being initialized (`MessageActivity`) with the extra “`pin`”.

```jsx
public void onClick(View view) {
        if (view.getId() != R.id.submit) {
            return;
        }
        if (Pin.count(Pin.class, "pin=?", new String[]{this.pin.getText().toString()}) > 0) {
            Intent intent = new Intent(getApplicationContext(), (Class<?>) MessageActivity.class);
            intent.putExtra("pin", this.pin.getText().toString());
            startActivity(intent);
            finish();
            return;
        }
        Toast.makeText(getBaseContext(), "Error: The pin you provided is invalid " + Pin.count(Pin.class), 1).show();
    }
```

In MessageActivity, there is a line with the function showMessage() that gets the string assigned to the variable `ptlab_key` from resources. There is where you will find the flag.

```jsx
showMessage("The key is: \n" + getString(R.string.ptlab_key));
```

![image.png](Android%201/image.png)
